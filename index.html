<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <!-- <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content"
    />
    <meta
      name="viewport"
      content="height=device-height, initial-scale=1.0, interactive-widget=resizes-content"
    /> -->
    <style>
      body {
        margin: 0;
        font-size: 16px;
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      input {
        font-size: 16px;
      }

      #container {
        height: 100%;
        display: grid;
        grid-template:
          "header" 50px
          "main" 1fr
          "footer" 50px;
      }

      #header {
        grid-area: header;
        position: sticky;
        top: 0;
        background: blueviolet;
        z-index: 100;
      }

      #main {
        grid-area: main;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      #footer {
        grid-area: footer;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <header id="header">header</header>
      <main id="main">
        main 2<br />
        <textarea
          id="textInput"
          style="
            background-color: antiquewhite;
            width: 378px;
            height: 2000px;
            font-size: 16px;
          "
        ></textarea>
      </main>
      <footer id="footer">footer</footer>
    </div>

    <script>
      // Handle visual viewport changes
      if (window.visualViewport) {
        const updateViewportHeight = () => {
          // Use requestAnimationFrame to handle iOS Safari frame delay
          requestAnimationFrame(() => {
            document.documentElement.style.setProperty(
              "--vh",
              `${window.visualViewport.height}px`
            );
          });
        };

        window.visualViewport.addEventListener("resize", updateViewportHeight);
        window.visualViewport.addEventListener("scroll", updateViewportHeight);

        // Initial setup
        updateViewportHeight();
      }

      // Prevent window scroll when keyboard is open
      const handleScroll = () => {
        window.scrollTo(0, 0);
      };

      window.addEventListener("scroll", handleScroll);

      // Clean up event listeners when the page is unloaded
      window.addEventListener("unload", () => {
        window.removeEventListener("scroll", handleScroll);
        if (window.visualViewport) {
          window.visualViewport.removeEventListener(
            "resize",
            updateViewportHeight
          );
          window.visualViewport.removeEventListener(
            "scroll",
            updateViewportHeight
          );
        }
      });
    </script>
  </body>
</html>
